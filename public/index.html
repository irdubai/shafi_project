<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุณุณุชู ุญุณุงุจุฏุงุฑ ุดุงู</title>
    <link rel="stylesheet" href="index.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512x512.png">
    <link rel="apple-touch-icon" href="icon-192x192.png">
</head>
<body>
    <!-- ุจุฎุด ูุถุนุช ุขููุงู -->
    <div id="online-status" class="online-status">
        <span id="status-indicator">๐ข</span>
        <span id="status-text">ุขููุงู</span>
    </div>

    <!-- ุตูุญู ูุงฺฏู -->
    <div id="login-page" class="login-page">
        <div class="login-container">
            <div class="login-header">
                <h1>๐ช ุณุณุชู ุญุณุงุจุฏุงุฑ ุดุงู</h1>
                <p>ูุทูุงู ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ</p>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username">ูุงู ฺฉุงุฑุจุฑ:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">ุฑูุฒ ุนุจูุฑ:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">ูุฑูุฏ</button>
            </form>
        </div>
    </div>

    <!-- ุงูพูฺฉุดู ุงุตู -->
    <div id="app" class="app hidden">
        <!-- ููุงุฑ ฺฉูุงุฑ -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="sidebar-toggle" id="sidebar-toggle">โฐ</button>
                <h2>ุณุณุชู ุญุณุงุจุฏุงุฑ ุดุงู</h2>
            </div>
            <div class="sidebar-content">
                <div class="app-info">
                    <h3>ุณุณุชู ุญุณุงุจุฏุงุฑ ุดุงู</h3>
                    <p>ูุฏุฑุช ฺฉุงูู ุญุณุงุจุฏุงุฑ</p>
                    <p>ุจุฑูุงููโููุณ: ููุณ ุจุนุงุฌ</p>
                </div>
                <ul class="nav-menu">
                    <li><a href="#" onclick="showSection('dashboard')" class="nav-link active">
                        <span class="nav-icon">๐</span> ุฏุงุดุจูุฑุฏ
                    </a></li>
                    <li><a href="#" onclick="showSection('customers')" class="nav-link">
                        <span class="nav-icon">๐ฅ</span> ูุดุชุฑุงู
                    </a></li>
                    <li><a href="#" onclick="showSection('products')" class="nav-link">
                        <span class="nav-icon">๐ฆ</span> ฺฉุงูุงูุง
                    </a></li>
                    <li><a href="#" onclick="showSection('invoices')" class="nav-link">
                        <span class="nav-icon">๐</span> ูุงฺฉุชูุฑูุง
                    </a></li>
                    <li><a href="#" onclick="showSection('expenses')" class="nav-link">
                        <span class="nav-icon">๐ฐ</span> ูุฒููโูุง
                    </a></li>
                    <li><a href="#" onclick="showSection('reports')" class="nav-link">
                        <span class="nav-icon">๐</span> ฺฏุฒุงุฑุดโูุง
                    </a></li>
                    <li><a href="#" onclick="showSection('exchange')" class="nav-link">
                        <span class="nav-icon">๐ฑ</span> ุชุจุฏู ุงุฑุฒ
                    </a></li>
                    <li><a href="#" onclick="showSection('payments')" class="nav-link">
                        <span class="nav-icon">๐ณ</span> ูุฏุฑุช ูพุฑุฏุงุฎุชโูุง
                    </a></li>
                    <li><a href="#" onclick="logout()" class="nav-link logout">
                        <span class="nav-icon">๐ช</span> ุฎุฑูุฌ
                    </a></li>
                </ul>
            </div>
        </nav>

        <!-- ูุญุชูุง ุงุตู -->
        <main class="main-content">
            <!-- ุจุฎุด ุฏุงุดุจูุฑุฏ -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h2>ุฏุงุดุจูุฑุฏ</h2>
                    <button class="btn btn-primary" onclick="refreshDashboard()">ุจูโุฑูุฒุฑุณุงู</button>
                </div>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3 id="customers-count">0</h3>
                        <p>ุชุนุฏุงุฏ ูุดุชุฑุงู</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="products-count">0</h3>
                        <p>ุชุนุฏุงุฏ ฺฉุงูุงูุง</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="invoices-count">0</h3>
                        <p>ุชุนุฏุงุฏ ูุงฺฉุชูุฑูุง</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-sales">0</h3>
                        <p>ฺฉู ูุฑูุด</p>
                    </div>
                </div>
                <div class="dashboard-content">
                    <div class="dashboard-widget">
                        <h3>ฺฉุงูุงูุง ฺฉู ููุฌูุฏ</h3>
                        <div id="low-stock-products">ุฏุงุฏูโุง ููุฌูุฏ ูุณุช</div>
                    </div>
                    <div class="dashboard-widget">
                        <h3>ูุงฺฉุชูุฑูุง ุงุฎุฑ</h3>
                        <div id="recent-invoices">ุฏุงุฏูโุง ููุฌูุฏ ูุณุช</div>
                    </div>
                </div>
            </section>

            <!-- ุจุฎุด ูุดุชุฑุงู -->
            <section id="customers" class="content-section">
                <div class="section-header">
                    <h2>ูุฏุฑุช ูุดุชุฑุงู</h2>
                    <div>
                        <button class="btn btn-secondary" onclick="generateCustomerReport()">ฺฏุฒุงุฑุด ุตูุฑุชุญุณุงุจ</button>
                        <button class="btn btn-primary" onclick="openModal('customerModal')">โ ุงูุฒูุฏู ูุดุชุฑ</button>
                    </div>
                </div>
                <div class="filters">
                    <input type="text" id="customer-search" placeholder="ุฌุณุชุฌู:" onkeyup="filterCustomers()">
                    <select id="customer-type-filter" onchange="filterCustomers()">
                        <option value="">ููุน ูุดุชุฑ:</option>
                        <option value="">ููู</option>
                        <option value="retail">ุฎุฑุฏู ูุฑูุด</option>
                        <option value="wholesale">ุนูุฏู ูุฑูุด</option>
                        <option value="supplier">ุชุฃูู ฺฉููุฏู</option>
                    </select>
                    <select id="customer-status-filter" onchange="filterCustomers()">
                        <option value="">ูุถุนุช:</option>
                        <option value="">ููู</option>
                        <option value="active">ูุนุงู</option>
                        <option value="inactive">ุบุฑูุนุงู</option>
                    </select>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ฺฉุฏ ูุดุชุฑ</th>
                                <th>ูุงู</th>
                                <th>ุดุฑฺฉุช</th>
                                <th>ุชููู</th>
                                <th>ููุฌูุฏ</th>
                                <th>ูุถุนุช</th>
                                <th>ุนููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="customers-table">
                            <!-- ุฏุงุฏูโูุง ูุดุชุฑุงู -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุจุฎุด ฺฉุงูุงูุง -->
            <section id="products" class="content-section">
                <div class="section-header">
                    <h2>ูุฏุฑุช ฺฉุงูุงูุง</h2>
                    <div>
                        <button class="btn btn-secondary" onclick="generateProductReport()">ฺฏุฒุงุฑุด ููุฌูุฏ</button>
                        <button class="btn btn-primary" onclick="openModal('productModal')">โ ุงูุฒูุฏู ฺฉุงูุง</button>
                    </div>
                </div>
                <div class="filters">
                    <input type="text" id="product-search" placeholder="ุฌุณุชุฌู:" onkeyup="filterProducts()">
                    <select id="product-category-filter" onchange="filterProducts()">
                        <option value="">ุฏุณุชูโุจูุฏ:</option>
                        <option value="">ููู</option>
                    </select>
                    <select id="product-stock-filter" onchange="filterProducts()">
                        <option value="">ูุถุนุช ููุฌูุฏ:</option>
                        <option value="">ููู</option>
                        <option value="low">ฺฉู ููุฌูุฏ</option>
                        <option value="available">ููุฌูุฏ</option>
                        <option value="out">ูุงููุฌูุฏ</option>
                    </select>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ฺฉุฏ ฺฉุงูุง</th>
                                <th>ูุงู ฺฉุงูุง</th>
                                <th>ููุช</th>
                                <th>ูุงุญุฏ</th>
                                <th>ููุฌูุฏ</th>
                                <th>ุฏุณุชูโุจูุฏ</th>
                                <th>ูุถุนุช</th>
                                <th>ุนููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="products-table">
                            <!-- ุฏุงุฏูโูุง ฺฉุงูุงูุง -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุจุฎุด ูุงฺฉุชูุฑูุง -->
            <section id="invoices" class="content-section">
                <div class="section-header">
                    <h2>ูุฏุฑุช ูุงฺฉุชูุฑูุง</h2>
                    <div>
                        <button class="btn btn-secondary" onclick="generateInvoiceReport()">ฺฏุฒุงุฑุด ูุงฺฉุชูุฑูุง</button>
                        <button class="btn btn-primary" onclick="openModal('invoiceModal')">โ ูุงฺฉุชูุฑ ุฌุฏุฏ</button>
                    </div>
                </div>
                <div class="filters">
                    <select id="invoice-type-filter" onchange="filterInvoices()">
                        <option value="">ููุน ูุงฺฉุชูุฑ:</option>
                        <option value="">ููู</option>
                        <option value="sale">ูุฑูุด</option>
                        <option value="purchase">ุฎุฑุฏ</option>
                        <option value="sale_return">ูุฑุฌูุน ูุฑูุด</option>
                        <option value="purchase_return">ูุฑุฌูุน ุฎุฑุฏ</option>
                    </select>
                    <input type="date" id="invoice-date-from" onchange="filterInvoices()" placeholder="ุงุฒ ุชุงุฑุฎ:">
                    <input type="date" id="invoice-date-to" onchange="filterInvoices()" placeholder="ุชุง ุชุงุฑุฎ:">
                    <select id="invoice-status-filter" onchange="filterInvoices()">
                        <option value="">ูุถุนุช:</option>
                        <option value="">ููู</option>
                        <option value="draft">ูพุดโููุณ</option>
                        <option value="confirmed">ุชุฃุฏ ุดุฏู</option>
                        <option value="paid">ูพุฑุฏุงุฎุช ุดุฏู</option>
                        <option value="cancelled">ูุบู ุดุฏู</option>
                    </select>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุดูุงุฑู ูุงฺฉุชูุฑ</th>
                                <th>ุชุงุฑุฎ</th>
                                <th>ููุน</th>
                                <th>ูุดุชุฑ</th>
                                <th>ูุจูุบ ฺฉู</th>
                                <th>ูพุฑุฏุงุฎุช ุดุฏู</th>
                                <th>ูุงูุฏู</th>
                                <th>ูุถุนุช</th>
                                <th>ุนููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="invoices-table">
                            <!-- ุฏุงุฏูโูุง ูุงฺฉุชูุฑูุง -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุจุฎุด ูุฒููโูุง -->
            <section id="expenses" class="content-section">
                <div class="section-header">
                    <h2>ูุฏุฑุช ูุฒููโูุง</h2>
                    <div>
                        <button class="btn btn-primary" onclick="openModal('expenseModal')">ุงูุฒูุฏู ูุฒูู ุฌุฏุฏ</button>
                        <button class="btn btn-secondary" onclick="generateExpenseReport()">๐ ฺฏุฒุงุฑุด ูุฒููโูุง</button>
                    </div>
                </div>
                <div class="filters">
                    <input type="date" id="expense-date-from" onchange="filterExpenses()" placeholder="ุงุฒ ุชุงุฑุฎ:">
                    <input type="date" id="expense-date-to" onchange="filterExpenses()" placeholder="ุชุง ุชุงุฑุฎ:">
                    <select id="expense-category-filter" onchange="filterExpenses()">
                        <option value="">ุฏุณุชูโุจูุฏ:</option>
                        <option value="">ููู</option>
                        <option value="administrative">ุงุฏุงุฑ</option>
                        <option value="transport">ุญูู ู ููู</option>
                        <option value="marketing">ุจุงุฒุงุฑุงุจ</option>
                        <option value="services">ุฎุฏูุงุช</option>
                        <option value="rent">ุงุฌุงุฑู</option>
                        <option value="supplies">ููุงุฒู</option>
                        <option value="other">ุณุงุฑ</option>
                    </select>
                    <select id="expense-payment-filter" onchange="filterExpenses()">
                        <option value="">ุฑูุด ูพุฑุฏุงุฎุช:</option>
                        <option value="">ููู</option>
                        <option value="cash">ููุฏ</option>
                        <option value="bank">ุจุงูฺฉ</option>
                        <option value="card">ฺฉุงุฑุช</option>
                        <option value="check">ฺฺฉ</option>
                    </select>
                </div>
                <div class="share-options">
                    <h4>ุงุดุชุฑุงฺฉ:</h4>
                    <button class="share-btn whatsapp" onclick="shareExpenses('whatsapp')">ูุงุชุณุงูพ</button>
                    <button class="share-btn telegram" onclick="shareExpenses('telegram')">ุชูฺฏุฑุงู</button>
                    <button class="share-btn copy" onclick="shareExpenses('copy')">ฺฉูพ ูุชู</button>
                    <button class="share-btn rubika" onclick="shareExpenses('rubika')">ุฑูุจฺฉุง</button>
                    <button class="share-btn eitaa" onclick="shareExpenses('eitaa')">ุงุชุง</button>
                    <button class="share-btn bale" onclick="shareExpenses('bale')">ุจูู</button>
                    <button class="share-btn sms" onclick="shareExpenses('sms')">ูพุงูฺฉ</button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุชุงุฑุฎ</th>
                                <th>ุดุฑุญ</th>
                                <th>ูุจูุบ</th>
                                <th>ุฏุณุชูโุจูุฏ</th>
                                <th>ูุถุนุช</th>
                                <th>ุนููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="expenses-table">
                            <!-- ุฏุงุฏูโูุง ูุฒููโูุง -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุจุฎุด ฺฏุฒุงุฑุดโูุง -->
            <section id="reports" class="content-section">
                <div class="section-header">
                    <h2>ฺฏุฒุงุฑุดโูุง ู ุชุญููโูุง</h2>
                    <div>
                        <button class="btn btn-secondary" onclick="generateProfitLoss()">ฺฏุฒุงุฑุด ุณูุฏ ู ุฒุงู</button>
                        <button class="btn btn-primary" onclick="exportAllReports()">๐ ุตุงุฏุฑุงุช ููู ฺฏุฒุงุฑุดโูุง</button>
                    </div>
                </div>
                <div class="report-filters">
                    <input type="date" id="report-date-from" placeholder="ุงุฒ ุชุงุฑุฎ:">
                    <input type="date" id="report-date-to" placeholder="ุชุง ุชุงุฑุฎ:">
                    <select id="report-type">
                        <option value="sales">ููุน ฺฏุฒุงุฑุด:</option>
                        <option value="sales">ูุฑูุด</option>
                        <option value="purchases">ุฎุฑุฏ</option>
                        <option value="expenses">ูุฒููโูุง</option>
                        <option value="customers">ูุดุชุฑุงู</option>
                        <option value="products">ฺฉุงูุงูุง</option>
                        <option value="profit_loss">ุณูุฏ ู ุฒุงู</option>
                    </select>
                    <select id="report-customer">
                        <option value="">ูุดุชุฑ:</option>
                        <option value="">ููู ูุดุชุฑุงู</option>
                    </select>
                    <select id="report-product">
                        <option value="">ูุญุตูู:</option>
                        <option value="">ููู ูุญุตููุงุช</option>
                    </select>
                    <select id="report-currency">
                        <option value="">ุงุฑุฒ:</option>
                        <option value="">ููู ุงุฑุฒูุง</option>
                        <option value="AED">ุฏุฑูู</option>
                        <option value="IRR">ุฑุงู</option>
                        <option value="USD">ุฏูุงุฑ</option>
                        <option value="EUR">ูุฑู</option>
                        <option value="CNY">ูุงู</option>
                    </select>
                    <button class="btn btn-primary" onclick="generateReport()">ุชููุฏ ฺฏุฒุงุฑุด</button>
                </div>
                <div class="report-summary">
                    <div class="stat-card">
                        <h3 id="total-sales-report">0</h3>
                        <p>ฺฉู ูุฑูุด</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-purchases-report">0</h3>
                        <p>ฺฉู ุฎุฑุฏ</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-expenses-report">0</h3>
                        <p>ฺฉู ูุฒููโูุง</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="net-profit-report">0</h3>
                        <p>ุณูุฏ ุฎุงูุต</p>
                    </div>
                </div>
                <div id="report-content">
                    <!-- ูุญุชูุง ฺฏุฒุงุฑุด -->
                </div>
            </section>

            <!-- ุจุฎุด ุชุจุฏู ุงุฑุฒ -->
            <section id="exchange" class="content-section">
                <div class="section-header">
                    <h2>ุชุจุฏู ุงุฑุฒ ู ูุฏุฑุช ูุฑุฎโูุง</h2>
                </div>
                <div class="exchange-content">
                    <div class="exchange-calculator">
                        <h3>ูุญุงุณุจู ุชุจุฏู ุงุฑุฒ</h3>
                        <div class="form-group">
                            <label>ูุจูุบ:</label>
                            <input type="number" id="exchange-amount" placeholder="ูุจูุบ ุฑุง ูุงุฑุฏ ฺฉูุฏ">
                        </div>
                        <div class="form-group">
                            <label>ุงุฒ ุงุฑุฒ:</label>
                            <select id="exchange-from">
                                <option value="AED">ุฏุฑูู (AED)</option>
                                <option value="IRR">ุฑุงู (IRR)</option>
                                <option value="USD">ุฏูุงุฑ (USD)</option>
                                <option value="EUR">ูุฑู (EUR)</option>
                                <option value="CNY">ูุงู (CNY)</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="calculateExchange()">ุชุจุฏู</button>
                        <div class="form-group">
                            <label>ุจู ุงุฑุฒ:</label>
                            <select id="exchange-to">
                                <option value="AED">ุฏุฑูู (AED)</option>
                                <option value="IRR">ุฑุงู (IRR)</option>
                                <option value="USD">ุฏูุงุฑ (USD)</option>
                                <option value="EUR">ูุฑู (EUR)</option>
                                <option value="CNY">ูุงู (CNY)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ูุชุฌู:</label>
                            <input type="text" id="exchange-result" readonly value="--">
                        </div>
                    </div>
                    <div class="exchange-rates">
                        <h3>ูุฏุฑุช ูุฑุฎ ุงุฑุฒ</h3>
                        <div class="form-group">
                            <label>ุงุฒ ุงุฑุฒ:</label>
                            <select id="rate-from">
                                <option value="AED">ุฏุฑูู (AED)</option>
                                <option value="IRR">ุฑุงู (IRR)</option>
                                <option value="USD">ุฏูุงุฑ (USD)</option>
                                <option value="EUR">ูุฑู (EUR)</option>
                                <option value="CNY">ูุงู (CNY)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ุจู ุงุฑุฒ:</label>
                            <select id="rate-to">
                                <option value="AED">ุฏุฑูู (AED)</option>
                                <option value="IRR">ุฑุงู (IRR)</option>
                                <option value="USD">ุฏูุงุฑ (USD)</option>
                                <option value="EUR">ูุฑู (EUR)</option>
                                <option value="CNY">ูุงู (CNY)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ูุฑุฎ ุชุจุฏู:</label>
                            <input type="number" id="exchange-rate" step="0.0001" placeholder="ูุฑุฎ ุฑุง ูุงุฑุฏ ฺฉูุฏ">
                        </div>
                        <button class="btn btn-primary" onclick="saveExchangeRate()">ุฐุฎุฑู ูุฑุฎ ุงุฑุฒ</button>
                    </div>
                </div>
                <div class="rates-table">
                    <h3>ูุฑุฎโูุง ูุนู ุงุฑุฒ</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงุฒ ุงุฑุฒ</th>
                                <th>ุจู ุงุฑุฒ</th>
                                <th>ูุฑุฎ</th>
                                <th>ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู</th>
                                <th>ุนููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="exchange-rates-table">
                            <!-- ูุฑุฎโูุง ุงุฑุฒ -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุจุฎุด ูพุฑุฏุงุฎุชโูุง -->
            <section id="payments" class="content-section">
                <div class="section-header">
                    <h2>ูุฏุฑุช ูพุฑุฏุงุฎุชโูุง</h2>
                    <div>
                        <button class="btn btn-primary" onclick="openModal('paymentModal')">ุงูุฒูุฏู ูพุฑุฏุงุฎุช ุฌุฏุฏ</button>
                        <button class="btn btn-secondary" onclick="generatePaymentReport()">๐ ฺฏุฒุงุฑุด ูพุฑุฏุงุฎุชโูุง</button>
                    </div>
                </div>
                <div class="filters">
                    <input type="date" id="payment-date-from" onchange="filterPayments()" placeholder="ุงุฒ ุชุงุฑุฎ:">
                    <input type="date" id="payment-date-to" onchange="filterPayments()" placeholder="ุชุง ุชุงุฑุฎ:">
                    <select id="payment-type-filter" onchange="filterPayments()">
                        <option value="">ููุน ูพุฑุฏุงุฎุช:</option>
                        <option value="">ููู</option>
                        <option value="cash">ููุฏ</option>
                        <option value="bank">ุจุงูฺฉ</option>
                        <option value="card">ฺฉุงุฑุช</option>
                        <option value="check">ฺฺฉ</option>
                        <option value="credit">ุงุนุชุจุงุฑ</option>
                    </select>
                    <select id="payment-status-filter" onchange="filterPayments()">
                        <option value="">ูุถุนุช:</option>
                        <option value="">ููู</option>
                        <option value="confirmed">ุชุฃุฏ ุดุฏู</option>
                        <option value="pending">ุฏุฑ ุงูุชุธุงุฑ</option>
                        <option value="cancelled">ูุบู ุดุฏู</option>
                        <option value="returned">ุจุฑฺฏุดุช ุฎูุฑุฏู</option>
                    </select>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุชุงุฑุฎ</th>
                                <th>ูุดุชุฑ</th>
                                <th>ูุงฺฉุชูุฑ</th>
                                <th>ูุจูุบ</th>
                                <th>ููุน ูพุฑุฏุงุฎุช</th>
                                <th>ุดูุงุฑู ูุฑุฌุน</th>
                                <th>ูุถุนุช</th>
                                <th>ุนููุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="payments-table">
                            <!-- ุฏุงุฏูโูุง ูพุฑุฏุงุฎุชโูุง -->
                        </tbody>
                    </table>
                </div>
                <div class="payment-summary">
                    <h3>ุฎูุงุตู ูพุฑุฏุงุฎุชโูุง</h3>
                    <div class="payment-stats">
                        <div class="stat-card">
                            <h3 id="total-cash-payments">0</h3>
                            <p>ฺฉู ูพุฑุฏุงุฎุชโูุง ููุฏ</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="total-bank-payments">0</h3>
                            <p>ฺฉู ูพุฑุฏุงุฎุชโูุง ุจุงูฺฉ</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="total-card-payments">0</h3>
                            <p>ฺฉู ูพุฑุฏุงุฎุชโูุง ฺฉุงุฑุช</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="pending-payments">0</h3>
                            <p>ูพุฑุฏุงุฎุชโูุง ุฏุฑ ุงูุชุธุงุฑ</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ููุฏุงูโูุง -->
    <!-- ููุฏุงู ูุดุชุฑ ุฌุฏุฏ -->
    <div id="customerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ูุดุชุฑ ุฌุฏุฏ</h2>
                <span class="close" onclick="closeModal('customerModal')">&times;</span>
            </div>
            <form id="customerForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>ฺฉุฏ ูุดุชุฑ:</label>
                        <input type="text" id="customer-code" required>
                    </div>
                    <div class="form-group">
                        <label>ูุงู:</label>
                        <input type="text" id="customer-name" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุดุฑฺฉุช:</label>
                        <input type="text" id="customer-company">
                    </div>
                    <div class="form-group">
                        <label>ุชููู:</label>
                        <input type="tel" id="customer-phone">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูู:</label>
                        <input type="email" id="customer-email">
                    </div>
                    <div class="form-group">
                        <label>ุดูุฑ:</label>
                        <input type="text" id="customer-city">
                    </div>
                </div>
                <div class="form-group">
                    <label>ุขุฏุฑุณ:</label>
                    <textarea id="customer-address"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุน ููุฌูุฏ:</label>
                        <select id="customer-balance-type">
                            <option value="creditor">ุจุณุชุงูฺฉุงุฑ</option>
                            <option value="debtor">ุจุฏูฺฉุงุฑ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ููุฌูุฏ:</label>
                        <input type="number" id="customer-balance" value="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ูุงุญุฏ ูพูู:</label>
                        <select id="customer-currency">
                            <option value="AED">ุฏุฑูู (AED)</option>
                            <option value="IRR">ุฑุงู (IRR)</option>
                            <option value="USD">ุฏูุงุฑ (USD)</option>
                            <option value="EUR">ูุฑู (EUR)</option>
                            <option value="CNY">ูุงู (CNY)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ููุน ูุดุชุฑ:</label>
                        <select id="customer-type">
                            <option value="retail">ุฎุฑุฏู ูุฑูุด</option>
                            <option value="wholesale">ุนูุฏู ูุฑูุด</option>
                            <option value="supplier">ุชุฃูู ฺฉููุฏู</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="customer-active" checked>
                        ูุนุงู
                    </label>
                </div>
                <div class="form-group">
                    <label>ุงุฏุฏุงุดุช:</label>
                    <textarea id="customer-notes"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('customerModal')">ุงูุตุฑุงู</button>
                    <button type="submit" class="btn btn-primary">ุฐุฎุฑู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ููุฏุงู ฺฉุงูุง ุฌุฏุฏ -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ฺฉุงูุง ุฌุฏุฏ</h2>
                <span class="close" onclick="closeModal('productModal')">&times;</span>
            </div>
            <form id="productForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>ฺฉุฏ ฺฉุงูุง:</label>
                        <input type="text" id="product-code" required>
                    </div>
                    <div class="form-group">
                        <label>ูุงู ฺฉุงูุง:</label>
                        <input type="text" id="product-name" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุช:</label>
                        <input type="number" id="product-price" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>ูุงุญุฏ ูพูู:</label>
                        <select id="product-currency">
                            <option value="AED">ุฏุฑูู (AED)</option>
                            <option value="IRR">ุฑุงู (IRR)</option>
                            <option value="USD">ุฏูุงุฑ (USD)</option>
                            <option value="EUR">ูุฑู (EUR)</option>
                            <option value="CNY">ูุงู (CNY)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ูุงุญุฏ:</label>
                        <input type="text" id="product-unit" required>
                    </div>
                    <div class="form-group">
                        <label>ููุฌูุฏ:</label>
                        <input type="number" id="product-stock" value="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุฏุณุชูโุจูุฏ:</label>
                        <input type="text" id="product-category">
                    </div>
                    <div class="form-group">
                        <label>ุญุฏุงูู ููุฌูุฏ:</label>
                        <input type="number" id="product-min-stock" value="0">
                    </div>
                </div>
                <div class="form-group">
                    <label>ูุญู ูฺฏูุฏุงุฑ:</label>
                    <input type="text" id="product-location">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="product-active" checked>
                        ูุนุงู
                    </label>
                </div>
                <div class="form-group">
                    <label>ุชูุถุญุงุช:</label>
                    <textarea id="product-description"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('productModal')">ุงูุตุฑุงู</button>
                    <button type="submit" class="btn btn-primary">ุฐุฎุฑู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ููุฏุงู ูุงฺฉุชูุฑ ุฌุฏุฏ -->
    <div id="invoiceModal" class="modal large-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ูุงฺฉุชูุฑ ุฌุฏุฏ</h2>
                <span class="close" onclick="closeModal('invoiceModal')">&times;</span>
            </div>
            <form id="invoiceForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุดูุงุฑู ูุงฺฉุชูุฑ:</label>
                        <input type="text" id="invoice-number" required>
                    </div>
                    <div class="form-group">
                        <label>ุชุงุฑุฎ:</label>
                        <input type="date" id="invoice-date" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุน ูุงฺฉุชูุฑ:</label>
                        <select id="invoice-type" required>
                            <option value="sale">ูุฑูุด</option>
                            <option value="purchase">ุฎุฑุฏ</option>
                            <option value="sale_return">ูุฑุฌูุน ูุฑูุด</option>
                            <option value="purchase_return">ูุฑุฌูุน ุฎุฑุฏ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ูุถุนุช:</label>
                        <select id="invoice-status">
                            <option value="draft">ูพุดโููุณ</option>
                            <option value="confirmed">ุชุฃุฏ ุดุฏู</option>
                            <option value="paid">ูพุฑุฏุงุฎุช ุดุฏู</option>
                            <option value="cancelled">ูุบู ุดุฏู</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ูุดุชุฑ:</label>
                        <select id="invoice-customer" required>
                            <option value="">ุงูุชุฎุงุจ ูุดุชุฑ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุงุฑุฒ ูุงฺฉุชูุฑ:</label>
                        <select id="invoice-currency">
                            <option value="AED">ุฏุฑูู (AED)</option>
                            <option value="IRR">ุฑุงู (IRR)</option>
                            <option value="USD">ุฏูุงุฑ (USD)</option>
                            <option value="EUR">ูุฑู (EUR)</option>
                            <option value="CNY">ูุงู (CNY)</option>
                        </select>
                    </div>
                </div>
                <div class="invoice-items">
                    <h3>ุขุชูโูุง ูุงฺฉุชูุฑ:</h3>
                    <button type="button" class="btn btn-small" onclick="addInvoiceItem()">โ ุงูุฒูุฏู ุขุชู</button>
                    <div id="invoice-items-container">
                        <!-- ุขุชูโูุง ูุงฺฉุชูุฑ -->
                    </div>
                </div>
                <div class="form-group">
                    <label>ุชูุถุญุงุช:</label>
                    <textarea id="invoice-description"></textarea>
                </div>
                <div class="invoice-totals">
                    <div class="totals-row">
                        <label>ุฌูุน ฺฉู:</label>
                        <span id="invoice-subtotal">0</span>
                    </div>
                    <div class="totals-row">
                        <label>ุชุฎูู:</label>
                        <input type="number" id="invoice-discount" value="0" onchange="calculateInvoiceTotal()">
                        <span>AED</span>
                    </div>
                    <div class="totals-row">
                        <label>ูุงูุงุช:</label>
                        <input type="number" id="invoice-tax" value="0" onchange="calculateInvoiceTotal()">
                        <span>AED</span>
                    </div>
                    <div class="totals-row total">
                        <label><strong>ูุจูุบ ููุง:</strong></label>
                        <span id="invoice-total"><strong>0 AED</strong></span>
                    </div>
                    <div class="totals-row">
                        <label>ูพุฑุฏุงุฎุช ุดุฏู:</label>
                        <input type="number" id="invoice-paid" value="0" onchange="calculateInvoiceBalance()">
                        <span>AED</span>
                    </div>
                    <div class="totals-row balance">
                        <label><strong>ูุงูุฏู:</strong></label>
                        <span id="invoice-balance"><strong>0 AED</strong></span>
                    </div>
                </div>
                <div class="invoice-actions">
                    <button type="button" class="btn btn-info" onclick="previewInvoice()">ูพุด ููุงุด</button>
                    <button type="button" class="btn btn-secondary" onclick="printInvoice('normal')">๐จ๏ธ ฺุงูพ ูุนููู</button>
                    <button type="button" class="btn btn-secondary" onclick="printInvoice('thermal')">๐จ๏ธ ฺุงูพ ุญุฑุงุฑุช</button>
                    <button type="button" class="btn btn-info" onclick="exportInvoicePDF()">๐ PDF</button>
                </div>
                <div class="share-section">
                    <h4>ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ</h4>
                    <div class="share-buttons">
                        <button type="button" class="share-btn whatsapp" onclick="shareInvoice('whatsapp')">ูุงุชุณุงูพ</button>
                        <button type="button" class="share-btn telegram" onclick="shareInvoice('telegram')">ุชูฺฏุฑุงู</button>
                        <button type="button" class="share-btn rubika" onclick="shareInvoice('rubika')">ุฑูุจฺฉุง</button>
                        <button type="button" class="share-btn eitaa" onclick="shareInvoice('eitaa')">ุงุชุง</button>
                        <button type="button" class="share-btn bale" onclick="shareInvoice('bale')">ุจูู</button>
                        <button type="button" class="share-btn sms" onclick="shareInvoice('sms')">ูพุงูฺฉ</button>
                        <button type="button" class="share-btn copy" onclick="shareInvoice('copy')">ฺฉูพ ูุชู</button>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('invoiceModal')">ุงูุตุฑุงู</button>
                    <button type="submit" class="btn btn-primary">ุฐุฎุฑู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ููุฏุงู ูพุด ููุงุด ูุงฺฉุชูุฑ -->
    <div id="invoicePreviewModal" class="modal large-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ูพุด ููุงุด ูุงฺฉุชูุฑ</h2>
                <span class="close" onclick="closeModal('invoicePreviewModal')">&times;</span>
            </div>
            <div id="invoice-preview-content" class="invoice-preview">
                <!-- ูุญุชูุง ูพุด ููุงุด ูุงฺฉุชูุฑ -->
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('invoicePreviewModal')">ุจุณุชู ูพุด ููุงุด</button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ูุฒูู ุฌุฏุฏ -->
    <div id="expenseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ูุฒูู ุฌุฏุฏ</h2>
                <span class="close" onclick="closeModal('expenseModal')">&times;</span>
            </div>
            <form id="expenseForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุชุงุฑุฎ:</label>
                        <input type="date" id="expense-date" required>
                    </div>
                    <div class="form-group">
                        <label>ุดุฑุญ:</label>
                        <input type="text" id="expense-description" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ูุจูุบ:</label>
                        <input type="number" id="expense-amount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>ูุงุญุฏ ูพูู:</label>
                        <select id="expense-currency">
                            <option value="AED">ุฏุฑูู (AED)</option>
                            <option value="IRR">ุฑุงู (IRR)</option>
                            <option value="USD">ุฏูุงุฑ (USD)</option>
                            <option value="EUR">ูุฑู (EUR)</option>
                            <option value="CNY">ูุงู (CNY)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุฏุณุชูโุจูุฏ:</label>
                        <select id="expense-category" required>
                            <option value="administrative">ุงุฏุงุฑ</option>
                            <option value="transport">ุญูู ู ููู</option>
                            <option value="marketing">ุจุงุฒุงุฑุงุจ</option>
                            <option value="services">ุฎุฏูุงุช</option>
                            <option value="rent">ุงุฌุงุฑู</option>
                            <option value="supplies">ููุงุฒู</option>
                            <option value="other">ุณุงุฑ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุฑูุด ูพุฑุฏุงุฎุช:</label>
                        <select id="expense-payment-method">
                            <option value="cash">ููุฏ</option>
                            <option value="bank">ุจุงูฺฉ</option>
                            <option value="card">ฺฉุงุฑุช</option>
                            <option value="check">ฺฺฉ</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>ุงุฏุฏุงุดุช:</label>
                    <textarea id="expense-notes"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('expenseModal')">ุงูุตุฑุงู</button>
                    <button type="submit" class="btn btn-primary">ุฐุฎุฑู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ููุฏุงู ูพุฑุฏุงุฎุช ุฌุฏุฏ -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ูพุฑุฏุงุฎุช ุฌุฏุฏ</h2>
                <span class="close" onclick="closeModal('paymentModal')">&times;</span>
            </div>
            <form id="paymentForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุชุงุฑุฎ:</label>
                        <input type="date" id="payment-date" required>
                    </div>
                    <div class="form-group">
                        <label>ูุดุชุฑ:</label>
                        <select id="payment-customer" required>
                            <option value="">ุงูุชุฎุงุจ ูุดุชุฑ</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>ูุงฺฉุชูุฑ ูุฑุชุจุท:</label>
                    <select id="payment-invoice">
                        <option value="">ุงูุชุฎุงุจ ูุงฺฉุชูุฑ (ุงุฎุชุงุฑ)</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ูุจูุบ:</label>
                        <input type="number" id="payment-amount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>ูุงุญุฏ ูพูู:</label>
                        <select id="payment-currency">
                            <option value="AED">ุฏุฑูู (AED)</option>
                            <option value="IRR">ุฑุงู (IRR)</option>
                            <option value="USD">ุฏูุงุฑ (USD)</option>
                            <option value="EUR">ูุฑู (EUR)</option>
                            <option value="CNY">ูุงู (CNY)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุน ูพุฑุฏุงุฎุช:</label>
                        <select id="payment-type" required>
                            <option value="cash">ููุฏ</option>
                            <option value="bank">ุจุงูฺฉ</option>
                            <option value="card">ฺฉุงุฑุช</option>
                            <option value="check">ฺฺฉ</option>
                            <option value="credit">ุงุนุชุจุงุฑ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุดูุงุฑู ูุฑุฌุน:</label>
                        <input type="text" id="payment-reference">
                    </div>
                </div>
                <div class="form-group">
                    <label>ูุถุนุช:</label>
                    <select id="payment-status">
                        <option value="confirmed">ุชุฃุฏ ุดุฏู</option>
                        <option value="pending">ุฏุฑ ุงูุชุธุงุฑ</option>
                        <option value="cancelled">ูุบู ุดุฏู</option>
                        <option value="returned">ุจุฑฺฏุดุช ุฎูุฑุฏู</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ุชูุถุญุงุช:</label>
                    <textarea id="payment-description"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('paymentModal')">ุงูุตุฑุงู</button>
                    <button type="submit" class="btn btn-primary">ุฐุฎุฑู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ููุชุฑ -->
    <footer class="footer">
        <p>ุชูุณุนูโุฏููุฏู: ููุณ ุจุนุงุฌ</p>
    </footer>

    <!-- JavaScript Files - ููุง ู ุตุญุญ -->
    <script src="common.js"></script>
    <script src="customers.js"></script>
    <script src="products.js"></script>
    <script src="invoices.js"></script>
    <script src="reports.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(function(registration) {
                    console.log('Service Worker registered successfully:', registration.scope);
                })
                .catch(function(error) {
                    console.log('Service Worker registration failed:', error);
                });
        }
    </script>
</body>
</html>
